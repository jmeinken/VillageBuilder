{% extends "home_base.html" %}
{% load app_filters %}
{% load widget_tweaks %}

{% block subcontent %}

<script type="text/javascript">
	$(document).ready(function(){
		
		$('.add-friend').click(function(event) {
			event.preventDefault;
			var friendId = $(this).attr('id').replace("participant-","");
			redirect = window.location.href
			$('#add-friend-form-' + friendId).submit();
		});
		$('.remove-friend').click(function(event) {
			event.preventDefault;
			var friendId = $(this).attr('id').replace("participant-","");
			redirect = window.location.href
			$('#remove-friend-form-' + friendId).submit();
		});

		
	}); 
</script>


<script type="text/javascript">
	$(document).ready(function(){
		
		var emailInputHtml = $('#email-search-inputs').html()
		
		function appendEmailField(appendCount) {
			for (var i=0; i<appendCount; i++) {
				$('#email-search-inputs').append(emailInputHtml);
			}
		}
		
		appendEmailField(1);
		
		$('#add-email-input').click(function() {
			appendEmailField(1);
		}); 
		
	}); 
</script>


	<div class="row">
		<div class="col-md-6">
		    <h2>Your Friends</h2>
			<ul class="nav nav-tabs">
				<li class="active"><a aria-expanded="false" data-target="#friends" data-toggle="tab">Friends</a></li>
				<li class=""><a aria-expanded="false" data-target="#friend_requests" data-toggle="tab">Friend Requests</a></li>
				<li class=""><a aria-expanded="false" data-target="#groups" data-toggle="tab">Groups</a></li>
				<li class="disabled"><a>Disabled</a></li>
			</ul>
			<div id="myTabContent" class="tab-content">
				<div class="tab-pane fade active in" id="friends">
					<div class="list-group">
						{% for participant in friends %}
						    {% include 'blocks/participantgroup.html' %}
						{% endfor %}
					</div>
				</div>
				<div class="tab-pane fade" id="friend_requests">
					<div class="list-group">
						{% for participant in friendRequests %}
						    {% include 'blocks/participantgroup.html' %}
						{% endfor %}
					</div>
				</div>
				<div class="tab-pane fade" id="groups">
					groups
				</div>
			</div>  
		</div>
		<div class="col-md-6">
			<h2>Find/Invite People</h2>
			<form action="{% url 'relationships:participant_search' %}" method="get">
				<div class="form-group">
					  <div class="input-group">
					      <input class="form-control" type="text" 
					          placeholder="Search for people or groups" 
					          name="participant-search-txt" />
					      <span class="input-group-btn">
					          <input class="btn btn-default" type="submit" id="participant-search-btn" value="Go" />
					      </span>
					  </div>
				</div>
			</form>
			Find Friends Using their Email Address:
			<form action="{% url 'relationships:email_search' %}" method="post">
			    {% csrf_token %}
			    <div  id="email-search-inputs" style="padding-bottom:5px;">
			        <div class="row" style="padding:2px 0">
			        	<div class="col-xs-6">
			        		<input class="form-control" type="email" name="email[]" placeholder="email*" />
			        	</div>
			        	<div class="col-xs-3">
			        		<input class="form-control" type="text" name="first_name[]" placeholder="first name*" />
			        	</div>
			        	<div class="col-xs-3">
			        		<input class="form-control" type="text" name="last_name[]" placeholder="last name" />
			        	</div>
			        </div>
			    </div>
			    <button type="button" class="btn btn-warning" id="add-email-input">Add Another Row</button>
				<button type="submit" class="btn btn-primary">Find Friends</button>
			</form>
		</div>
	</div>
	
{% endblock %}	




