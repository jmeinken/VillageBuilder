{% extends "core/bases/base.html" %}
{% load app_filters %}
{% load widget_tweaks %}
{% load staticfiles %}

{% block content %}

<style>
	body {
		background-color: #808080;
		margin-bottom: 30px;
	}
	#login-form .form-control {
		display: inline;
		width: 40%;
	}
	#vb img #panel-view-window {
		vertical-align: baseline;
	}
</style>

<script>



$(document).ready(function(){
	
	$.easing.jswing = $.easing.swing;

	$.extend($.easing,
	{
	    def: 'easeOutQuad',
	    swing: function (x, t, b, c, d) {
	        //alert($.easing.default);
	        return $.easing[$.easing.def](x, t, b, c, d);
	    },
	    easeInQuad: function (x, t, b, c, d) {
	        return c*(t/=d)*t + b;
	    },
	    easeOutQuad: function (x, t, b, c, d) {
	        return -c *(t/=d)*(t-2) + b;
	    },
	    easeInOutQuad: function (x, t, b, c, d) {
	        if ((t/=d/2) < 1) return c/2*t*t + b;
	        return -c/2 * ((--t)*(t-2) - 1) + b;
	    },
	    easeInCubic: function (x, t, b, c, d) {
	        return c*(t/=d)*t*t + b;
	    },
	    easeOutCubic: function (x, t, b, c, d) {
	        return c*((t=t/d-1)*t*t + 1) + b;
	    },
	    easeInOutCubic: function (x, t, b, c, d) {
	        if ((t/=d/2) < 1) return c/2*t*t*t + b;
	        return c/2*((t-=2)*t*t + 2) + b;
	    },
	    easeInQuart: function (x, t, b, c, d) {
	        return c*(t/=d)*t*t*t + b;
	    },
	    easeOutQuart: function (x, t, b, c, d) {
	        return -c * ((t=t/d-1)*t*t*t - 1) + b;
	    },
	    easeInOutQuart: function (x, t, b, c, d) {
	        if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
	        return -c/2 * ((t-=2)*t*t*t - 2) + b;
	    },
	    easeInQuint: function (x, t, b, c, d) {
	        return c*(t/=d)*t*t*t*t + b;
	    },
	    easeOutQuint: function (x, t, b, c, d) {
	        return c*((t=t/d-1)*t*t*t*t + 1) + b;
	    },
	    easeInOutQuint: function (x, t, b, c, d) {
	        if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
	        return c/2*((t-=2)*t*t*t*t + 2) + b;
	    },
	    easeInSine: function (x, t, b, c, d) {
	        return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
	    },
	    easeOutSine: function (x, t, b, c, d) {
	        return c * Math.sin(t/d * (Math.PI/2)) + b;
	    },
	    easeInOutSine: function (x, t, b, c, d) {
	        return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
	    },
	    easeInExpo: function (x, t, b, c, d) {
	        return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
	    },
	    easeOutExpo: function (x, t, b, c, d) {
	        return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
	    },
	    easeInOutExpo: function (x, t, b, c, d) {
	        if (t==0) return b;
	        if (t==d) return b+c;
	        if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
	        return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
	    },
	    easeInCirc: function (x, t, b, c, d) {
	        return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
	    },
	    easeOutCirc: function (x, t, b, c, d) {
	        return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
	    },
	    easeInOutCirc: function (x, t, b, c, d) {
	        if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
	        return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
	    },
	    easeInElastic: function (x, t, b, c, d) {
	        var s=1.70158;var p=0;var a=c;
	        if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
	        if (a < Math.abs(c)) { a=c; var s=p/4; }
	        else var s = p/(2*Math.PI) * Math.asin (c/a);
	        return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	    },
	    easeOutElastic: function (x, t, b, c, d) {
	        var s=1.70158;var p=0;var a=c;
	        if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
	        if (a < Math.abs(c)) { a=c; var s=p/4; }
	        else var s = p/(2*Math.PI) * Math.asin (c/a);
	        return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
	    },
	    easeInOutElastic: function (x, t, b, c, d) {
	        var s=1.70158;var p=0;var a=c;
	        if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
	        if (a < Math.abs(c)) { a=c; var s=p/4; }
	        else var s = p/(2*Math.PI) * Math.asin (c/a);
	        if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	        return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
	    },
	    easeInBack: function (x, t, b, c, d, s) {
	        if (s == undefined) s = 1.70158;
	        return c*(t/=d)*t*((s+1)*t - s) + b;
	    },
	    easeOutBack: function (x, t, b, c, d, s) {
	        if (s == undefined) s = 1.70158;
	        return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
	    },
	    easeInOutBack: function (x, t, b, c, d, s) {
	        if (s == undefined) s = 1.70158;
	        if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
	        return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
	    },
	    easeInBounce: function (x, t, b, c, d) {
	        return c - $.easing.easeOutBounce (x, d-t, 0, c, d) + b;
	    },
	    easeOutBounce: function (x, t, b, c, d) {
	        if ((t/=d) < (1/2.75)) {
	            return c*(7.5625*t*t) + b;
	        } else if (t < (2/2.75)) {
	            return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
	        } else if (t < (2.5/2.75)) {
	            return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
	        } else {
	            return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
	        }
	    },
	    easeInOutBounce: function (x, t, b, c, d) {
	        if (t < d/2) return $.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
	        return $.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
	    }
	});
	
	var currentPanel = 1;
	var animationRunning = false;
	
	function slideshowActions(panel) {
		if (panel == 1) {
			$('#panel-view-window').animate( { scrollLeft: '+=600' }, 500, 'swing', function() {
				$('#btn-backward').show();
				$('#btn-forward-text').html('<strong>next&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong>');
				setTimeout(function() {
					$('#item1').animate( { width: '100', height: '100' }, 2000, 'easeOutBounce');
				}, 200);
				setTimeout(function() {
					$('#item2').animate( { width: '100', height: '100' }, 1200, 'easeOutBounce');
				}, 400);
				setTimeout(function() {
					$('#item3').animate( { width: '100', height: '100' }, 1800, 'easeOutBounce');
				}, 600);
				setTimeout(function() {
					$('#item4').animate( { width: '100', height: '100' }, 1400, 'easeOutBounce');
				}, 800);
				setTimeout(function() {
					$('#item5').animate( { width: '100', height: '100' }, 1700, 'easeOutBounce');
				}, 1000);
				setTimeout(function() {
					$('#panel2-text').animate( { opacity: '1' }, 1000);
				}, 500);
				setTimeout(function() {
					animationRunning = false;
				}, 3000);
			});
		}
		if (panel == 2) {
			$('#item1').animate( { width: '70', height: '70', left: 0 }, 1000);
			$('#item2').animate( { width: '70', height: '70', left: 75 }, 1000);
			$('#item3').animate( { width: '70', height: '70', left: 150 }, 1000);
			$('#item4').animate( { width: '70', height: '70', left: 225 }, 1000);
			$('#item5').animate( { width: '70', height: '70', left: 300 }, 1000);
			$('#panel2-text').animate( { opacity: '0' }, 500, 'swing', function() {
				$('#panel2-text').html('And they can share back, creating a growing inventory of items available to you.');
				$('#panel2-text').animate( { opacity: '1' }, 1000);
			});
			$('#person1').animate( { width: '110', height: '110', left: '40%', top: '220px' }, 1000);
			setTimeout(function() {
				animationRunning = false;
			}, 2000);
		}
		if (panel == 3) {
			$('#panel-view-window').animate( { scrollLeft: '+=600' }, 500, 'swing', function() {
				$('#panel4-text').animate( { opacity: '1' }, 1000);
				setTimeout(function() {
					animationRunning = false;
				}, 1000);
			});
		}
	}
	function slideshowReverseActions(panel) {
		if (panel == 2) {
			$('#panel-view-window').animate( { scrollLeft: '-=600' }, 500, 'swing', function() {
				$('#btn-backward').hide();
				$('#btn-forward-text').html('<strong>how it works</strong>');
				$('#item1').animate( { width: '0', height: '0' }, 0);
				$('#item2').animate( { width: '0', height: '0' }, 0);
				$('#item3').animate( { width: '0', height: '0' }, 0);
				$('#item4').animate( { width: '0', height: '0' }, 0);
				$('#item5').animate( { width: '0', height: '0' }, 0);
				$('#panel2-text').animate( { opacity: '0' }, 0);
				animationRunning = false;
			});
		}
		if (panel == 3) {
			$('#item1').animate( { width: '100', height: '100', left: 0 }, 500);
			$('#item2').animate( { width: '100', height: '100', left: 125}, 500);
			$('#item3').animate( { width: '100', height: '100', left: 250 }, 500);
			$('#item4').animate( { width: '100', height: '100', left: 375 }, 500);
			$('#item5').animate( { width: '100', height: '100', left: 500 }, 500);
			$('#panel2-text').animate( { opacity: '0' }, 500, 'swing', function() {
				$('#panel2-text').html('Have power tools gathering dust? Hanging on to that old stroller just in case? VillageBuilder lets you share those extra items with friends and neighbors.');
				$('#panel2-text').animate( { opacity: '1' }, 500);
			});
			$('#person1').animate( { width: '200', height: '200', left: '33%', top: '140px' }, 500);
			setTimeout(function() {
				animationRunning = false;
			}, 1000);
		}
		if (panel == 4) {
			$('#panel-view-window').animate( { scrollLeft: '-=600' }, 500, 'swing', function() {
				$('#panel4-text').animate( { opacity: '0' }, 0);
				animationRunning = false;
			});
		}
	}
	
	$('#panel-view-window').scrollLeft(-1800);
	$('#btn-forward,#btn-forward-text').click(function() {
		if (!animationRunning) {
			animationRunning = true;
			slideshowActions(currentPanel);
			currentPanel++;
		}
		return false;
	});
	$('#btn-backward').click(function() {
		if (!animationRunning) {
			animationRunning = true;
			slideshowReverseActions(currentPanel);
			currentPanel--;
		}
		return false;
	});
});

</script>
    
<div class="container-fluid" style="max-width:1280px;min-width:750px;background-color:#FFF;padding:0;">
    <div class="row" style="padding:15px 15px 7px 15px;">
        <div class="col-md-7">
		 	<img src="{% static 'img/vb-large.png' %}" alt="VillageBuilder" width="358" height="47" /> 
		 	<div style="font-size:18px;color:#585858;">
		 	    share resources with friends and neighbors
		 	</div>
		</div>
		<div class="col-md-5" style="margin-top:5px;">
	    	{% if form.errors %}
		    	<div class="alert alert-danger">
				    Unable to log in. Check your email and password.
				</div>
		    {% endif %}
		    <form method="post" action="{% url 'login' %}" id="login-form">
		        {% csrf_token %}
				{{ form.username|attr:"class:form-control input-sm"|attr:"placeholder:email" }}
				{{ form.password|attr:"class:form-control input-sm"|attr:"placeholder:password" }}
	        	<button type="submit" class="btn btn-sm btn-primary" value="Login">
	        		Login
	        	</button>
		        <input type="hidden" name="next" value="{{ next }}" />
		   </form>
		   <div style="padding:10px 0;font-size:0.9em;font-weight:bold;">
			   <a href="{% url 'account:account_info' %}">Create Account</a> 
			   &nbsp;&nbsp;|&nbsp;&nbsp;
			   <a href="{% url 'request_reset_password' %}">
			       Forgot Password?
			   </a>
		   </div>
	   	</div>
 	</div>
 	{% if messages or successMessage or errorMessage %}
	    <div class="row">
	        <div class="col-md-10 col-md-offset-1">
                {% include 'core/blocks/notifications.html' %} 
            </div>
        </div>
    {% endif %}
    
    <style>
    	#window-container-container {
    		width:100%;
    		background-color:#006500;
    		padding:30px;
    		border-top:3px #34B51E solid;
    		border-bottom:3px #34B51E solid;
    		height:70vh;
    		min-height: 400px;
    		position: relative;
    	}
    	#window-container {
    		width:620px;
    		position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			-ms-transform: translate(-50%, -50%);
    		background-color:#fff;
    		padding:10px;
    	}
    	#panel-view-window {
    		width:600px;
    		overflow:hidden;
    		height:400px;
    	}
    	.slideshow-panel {
    		width:25%;
    		display:table-cell;
    		text-align:center;
    		position:relative;
    		height:400px;
    	}
    </style>
    
    
    <div id="window-container-container">
	    <div id="window-container">
		    <div style="position:absolute;top:40%;left:-100px;">
		   		<a href="" id="btn-backward" style="display:none;color:#fff;">
		   		    <i class="fa fa-chevron-circle-left fa-4x"></i>
		   		</a>
		   	</div>
		   	<div style="position:absolute;top:40%;right:-100px;">
		   		<a href="" id="btn-forward"  style="color:#fff;"><i class="fa fa-chevron-circle-right fa-4x"></i></a>
		   	</div>
		   	<div style="position:absolute;top:55%;right:-120px;">
		   		<a href="" id="btn-forward-text" style="color:#fff;"><strong>how it works</strong></a>
		   	</div>
		    <div id="panel-view-window">
		        <div style="width:2400px;height:400px;display:table;">
				    <div class="slideshow-panel" style="vertical-align: middle;">
						{% include 'core/blocks/login_window_1.html' %}
					</div>
					<div class="slideshow-panel" style="vertical-align: bottom;">
						{% include 'core/blocks/login_window_3.html' %}
					</div>
					<div class="slideshow-panel" style="vertical-align: bottom;">
						{% include 'core/blocks/login_window_4.html' %}
					</div>
					<div class="slideshow-panel" style="vertical-align: top;">
						{% include 'core/blocks/login_window_2.html' %}
					</div>
				</div>
		    </div>
		</div>
	</div>
	{% include 'core/blocks/footer.html' %}
</div>

<div class="modal" id="name-privacy-modal">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
			    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
			    <h4 class="modal-title">Name Privacy</h4>
			</div>
			<div class="modal-body">
			    <p>
			    	Your name enables friends to find you and is required.
			    	We recommend entering your full real name or at least something that friends will recognize.
			    </p>
			    <p>
			    	You will have the chance to review and set privacy options in a minute.
			    </p>
			</div>
			<div class="modal-footer">
			    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>




{% endblock %}